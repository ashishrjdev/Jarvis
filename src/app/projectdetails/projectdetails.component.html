<main class="container">
    <section class="mt-5 row mx-0 align-items-center">
        <div class="col-md-12">
            <h5 class="page-title p-1 font-smbold">Project Dashboard</h5>
        </div>
    </section>
    <section class="mt-4 row mx-0">
        <div class="col-md-12">
            <ul class="nav nav-tabs bg-white shadow-sm">
                <li class="nav-item p-2 bg-white">
                    <a class="nav-link" href="#nav-timeline" data-toggle="tab">Timeline</a>
                </li>
                <li class="nav-item p-2 bg-white">
                    <a class="nav-link  active" href="#nav-taskboard" data-toggle="tab">TasksBoard</a>
                </li>
            </ul>
            <div class="tab-content p-3">
                <div class="tab-pane fade" id="nav-timeline" role="tabpanel">
                    <div class="thread py-3 d-flex align-items-center">
                        <div class="date px-3 py-2 mx-1 bg-white shadow-sm rounded text-center">
                            June 26, 2019
                            <div class="node"></div>
                        </div>
                        <div class="work d-flex align-items-center">
                            <div class="dc-separate"></div>
                            <div class="content p-3 bg-white shadow-sm rounded">
                                Create a new task : <strong>Save todos for different dates.</strong>&nbsp;&nbsp;<a
                                    href="">View task.</a>
                            </div>
                        </div>
                    </div>
                    <div class="thread py-3 d-flex align-items-center">
                        <div class="date px-3 py-2 mx-1 bg-white shadow-sm rounded text-center">
                            June 26, 2019
                            <div class="node"></div>
                        </div>
                        <div class="work d-flex align-items-center ">
                            <div class="dc-separate"></div>
                            <div class="content p-3 bg-white shadow-sm rounded">
                                There are many variations of passages of Lorem Ipsum available, but the majority have
                                suffered alteration in some form, by injected humour, or randomised words which don't
                                look even slightly believable.
                            </div>
                        </div>
                    </div>
                    <div class="thread py-3 d-flex align-items-center">
                        <div class="date px-3 py-2 mx-1 bg-white shadow-sm rounded text-center">
                            June 26, 2019
                            <div class="node"></div>
                        </div>
                        <div class="work d-flex align-items-center ">
                            <div class="dc-separate"></div>
                            <div class="content p-3 bg-white shadow-sm rounded">
                                The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those
                                interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero
                                are also reproduced in their exact original form, accompanied by English versions from
                                the 1914 translation by H. Rackham.
                            </div>
                        </div>
                    </div>
                    <div class="thread py-3 d-flex align-items-center">
                        <div class="date px-3 py-2 mx-1 bg-white shadow-sm rounded text-center">
                            June 26, 2019
                            <div class="node"></div>
                        </div>
                        <div class="work d-flex align-items-center ">
                            <div class="dc-separate"></div>
                            <div class="content p-3 bg-white shadow-sm rounded">
                                Updated task : <strong>Save todos for different dates.</strong>&nbsp;&nbsp;<a
                                    href="">View task.</a>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="no-data text-center">
                        <img src="assets/images/notimeline.svg" alt="">
                        <h5 class="text-center pt-3">No timeline to display.</h5>
                    </div> -->
                </div>
                <div class="tab-pane fade show active" id="nav-taskboard" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="task-section">
                                <div
                                    class="ts-header p-3 bg-white d-flex align-items-center justify-content-between todo-title">
                                    <p class="font-smbold d-flex align-items-center m-0">
                                        <i class="material-icons">assignment</i>&nbsp;&nbsp;Todo
                                    </p>
                                    <button 
                                        data-toggle="modal"
                                        data-target="#newtask"
                                        class="btn btn-sm btn-outline-light d-flex align-items-center">
                                        <i class="material-icons">add</i>
                                    </button>
                                </div>
                                <div
                                    cdkDropList
                                    #todoList="cdkDropList"
                                    [cdkDropListData]="todosList"
                                    [cdkDropListConnectedTo]="[progressList, doneList]" 
                                    (cdkDropListDropped)="onDrop($event)"
                                    class="ts-content p-2">
                                    <div class="card single-task border-0 shadow-sm"
                                        *ngFor="let todo of todosList" cdkDrag>
                                        <div class="card-body">
                                            <p class="card-title font-smbold">{{ todo.title }}</p>
                                            <p class="card-text text-muted small">{{ todo.description }}</p>
                                            <div class="dropdown task-settings">
                                                <button
                                                    class="btn dropdown-toggle d-flex align-items-center justify-content-center"
                                                    type="button"
                                                    data-toggle="dropdown">
                                                    <i class="material-icons">more_vert</i>
                                                </button>
                                                <div class="dropdown-menu dropdown-menu-right border-0 shadow-lg mt-2 px-1">
                                                    <button
                                                        class="dropdown-item d-flex align-items-center py-2 rounded"
                                                        type="button"
                                                        data-toggle="modal"
                                                        data-target="#newproject"
                                                        (click)="setProject(project)">
                                                        <i class="material-icons">edit</i>&nbsp;&nbsp;Edit
                                                    </button>
                                                    <button
                                                        class="dropdown-item d-flex align-items-center py-2 rounded"
                                                        type="button"
                                                        data-toggle="modal"
                                                        data-target="#delproject"
                                                        (click)="setProject(project)">
                                                        <i class=" material-icons">delete</i>&nbsp;&nbsp;Delete
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="task-section">
                                <div
                                    class="ts-header p-3 bg-white d-flex align-items-center justify-content-between inprogress-title">
                                    <p class="font-smbold d-flex align-items-center m-0"><i
                                            class="material-icons">assignment_late</i>&nbsp;&nbsp;In Progress</p>
                                </div>
                                <div 
                                    cdkDropList
                                    #progressList="cdkDropList"
                                    [cdkDropListData]="inProgressList"
                                    [cdkDropListConnectedTo]="[todoList, doneList]"
                                    (cdkDropListDropped)="onDrop($event)"
                                    class="ts-content p-2">
                                    <div class="card single-task border-0 shadow-sm"
                                        *ngFor="let inProgress of inProgressList" cdkDrag>
                                        <div class="card-body">
                                            <p class="card-title font-smbold">{{ inProgress.title }}</p>
                                            <p class="card-text text-muted small">{{ inProgress.description }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="task-section">
                                <div
                                    class="ts-header p-3 bg-white d-flex align-items-center justify-content-between completed-title">
                                    <p class="font-smbold d-flex align-items-center m-0">
                                        <i class="material-icons">assignment_turned_in</i>&nbsp;&nbsp;Completed
                                    </p>
                                </div>
                                <div
                                    cdkDropList
                                    #doneList="cdkDropList"
                                    [cdkDropListData]="completedList"
                                    [cdkDropListConnectedTo]="[todoList, progressList]"
                                    (cdkDropListDropped)="onDrop($event)"
                                    class="ts-content p-2">
                                    <div class="card single-task border-0 shadow-sm"
                                    *ngFor="let completed of completedList" cdkDrag>
                                        <div class="card-body">
                                            <p class="card-title font-smbold text-muted "><del>{{ completed.title }}</del></p>
                                            <p class="card-text text-muted small">{{ completed.description }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="no-data text-center">
                        <img src="assets/images/notasks.png" alt="">
                        <h5 class="text-center pt-3">Yayy! No tasks for today.</h5>
                    </div> -->
                </div>
            </div>
        </div>
    </section>
    <div class="modal fade" id="newtask" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content p-3">
                <form 
                    name="form"
                    (ngSubmit)="ctform.form.valid && onSubmit(ctform)"
                    #ctform="ngForm">
                    <div class="modal-header border-0">
                        <h5 
                            *ngIf="isEditing"
                            class="modal-title font-smbold pb-1">
                            Update Task
                        </h5>
                        <h5 
                            *ngIf="!isEditing"
                            class="modal-title font-smbold pb-1">
                            Create New Task
                        </h5>
                        <button
                            type="button"
                            class="close"
                            onclick="$('#newtask').modal('hide');"
                            (click)="resetDefaults()"
                            aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body py-3">
                        <div class="form-group">
                            <label for="tasktitle" class="font-smbold">Task Title</label>
                            <input 
                                type="text"
                                class="form-control"
                                id="tasktitle"
                                placeholder="Your new task name"
                                required
                                [(ngModel)]="selectedTask.name"
                                #tasktitle="ngModel"
                                name="tasktitle"
                                [ngClass]="{
                                    'is-invalid': tasktitle.touched && !tasktitle.valid,
                                    'is-valid': tasktitle.touched && tasktitle.valid
                                }"/>
                            <div *ngIf="tasktitle.touched && tasktitle.valid" class="valid-feedback">
                                Nice!
                            </div>
                            <div *ngIf="tasktitle.touched && !tasktitle.valid" class="invalid-feedback">
                                Please enter task title.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="taskdesc" class="font-smbold">Task Description</label>
                            <textarea
                                class="form-control"
                                id="taskdesc"
                                rows="5"
                                placeholder="Tell us something about the task in detail"
                                required
                                [(ngModel)]="selectedTask.description"
                                #taskdesc="ngModel"
                                name="taskdesc"
                                [ngClass]="{
                                    'is-invalid': taskdesc.touched && !taskdesc.valid,
                                    'is-valid': taskdesc.touched && taskdesc.valid
                                }"></textarea>
                            <div *ngIf="taskdesc.touched && taskdesc.valid" class="valid-feedback">
                                Looks Good!
                            </div>
                            <div *ngIf="taskdesc.touched && !taskdesc.valid" class="invalid-feedback">
                                Please enter task description.
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer border-0">
                        <button
                            *ngIf="isEditing"
                            type="submit"
                            class="btn btn-primary"
                            [disabled]="!ctform.valid"
                            onclick="$('#newtask').modal('hide');">
                            Update Task
                        </button>
                        <button
                            *ngIf="!isEditing"
                            type="submit"
                            class="btn btn-primary"
                            [disabled]="!ctform.valid"
                            onclick="$('#newtask').modal('hide');">
                            Create Task
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>